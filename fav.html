<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="tailwind.css">
    <title>Meal App</title>
</head>
<body>
  <div class="flex flex-col items-center container mx-auto px-4 ">
    <div class="flex flex-row items-start px-4" >
      <a class="text-pink-500 background-transparent font-bold uppercase px-6 py-2 text-sm outline-none focus:outline-none mr-1 mb-1" href="index.html" >Random Recipe</a>
      <a class="text-pink-500 background-transparent font-bold uppercase px-6 py-2 text-sm outline-none focus:outline-none mr-1 mb-1" href="/fav" >Favorites</a>
    </div>
  <h1 class="text-5xl font-black">My favorites Recipes</h1>

  <ul id="fav-recipes">
  </ul>


    <!--1. Se connecter à la bdd local storage-->

    <!--2. Boucle qui affiche chaque recette du tableau récupéré-->


    <!--3. Afficher en joli-->

    <!--4. Supprimer la recette de la bdd-->



 <!--Menu-->
 <div class="flex flex-col items-end container mx-auto px-4" >
    <ul >
        <li class="text-pink-500 background-transparent font-bold uppercase px-6 py-2 text-sm outline-none focus:outline-none mr-1 mb-1"><a href="index.html" >Accueil</a></li>
        <li class="text-pink-500 background-transparent font-bold uppercase px-6 py-2 text-sm outline-none focus:outline-none mr-1 mb-1"><a href="fav.html" >Mes fav's</a></li>
        <li class="text-pink-500 background-transparent font-bold uppercase px-6 py-2 text-sm outline-none focus:outline-none mr-1 mb-1" ><a href="week.html" >Ma semaine</a></li>
    </ul>
</div>
</div>


</body>
<script>

  const favList = document.getElementById('fav-recipes');
  //lecture JSON
  //je récupère le localStorage
  var favsArray = JSON.parse(localStorage.getItem("favs"));
  if(favsArray !== null){
    buildView(favsArray)
  }

  function buildView(favsArray){

    favsArray.forEach(function(recipe, index){
      console.log(recipe);
      const elementList = document.createElement('li');
      elementList.className = 'flex flex-row my-8';
      const htmlForRecipe = `
          <a href="/?id=${recipe.idMeal}" class="flex">
            <div class="rounded-xxl shadow-lg overflow-hidden">
              <img src='${recipe.strMealThumb}' width="70" />
            </div>
            <div class="flex flex-col ml-8">
              <h2 class="text-pink-500 text-xxl font-black"> ${recipe.strMeal} </h2>
              <p> ${recipe.strInstructions.substring(0,100)} ... </p>
            </div>
          </a>
      `;
      elementList.innerHTML = htmlForRecipe;
      favList.appendChild(elementList);
      })
    }


</script>
</html>
